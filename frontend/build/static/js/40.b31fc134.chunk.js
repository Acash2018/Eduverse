"use strict";(self.webpackChunkeduverse=self.webpackChunkeduverse||[]).push([[40],{7040:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(5043),n=t(7016),l=t(3216),c=t(579);const o=e=>{let{isOpen:s,onClose:t}=e;const[o,i]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,b]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[g,y]=(0,a.useState)([]),v=(0,a.useRef)(null),f=(0,l.Zp)(),w=async()=>{if((()=>{const e=[];return o.trim()||e.push("Title is required"),r.trim()||e.push("Post content is required"),u||e.push("Please select a category"),y(e),0===e.length})()&&!j){N(!0);try{const e=new FormData;e.append("title",o.trim()),e.append("content",r.trim()),e.append("category",u),m.forEach((s=>e.append("files",s)));const s=localStorage.getItem("token");if(!s)throw new Error("Authentication required");if(!(await fetch("http://localhost:5002/posts",{method:"POST",headers:{Authorization:`Bearer ${s}`},body:e})).ok)throw new Error("Failed to create post");t(),f("/posts")}catch(e){y([e.message])}finally{N(!1)}}};return s?(0,c.jsx)("div",{className:"modal-overlay",children:(0,c.jsxs)("div",{className:"holographic-panel modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{className:"neon-text",children:p?"Preview Post":"Create New Post"}),(0,c.jsx)("button",{className:"close-button cyber-button",onClick:t,children:"\xd7"})]}),p?(0,c.jsxs)("div",{className:"preview-content cyber-box",children:[(0,c.jsx)("h3",{className:"neon-text",children:o}),(0,c.jsx)("div",{className:"category-tag cyber-tag",children:u}),(0,c.jsx)("div",{className:"post-content holographic-text",dangerouslySetInnerHTML:{__html:r}}),(0,c.jsxs)("div",{className:"preview-actions",children:[(0,c.jsxs)("button",{className:"cyber-button",onClick:()=>x(!1),children:[(0,c.jsx)("span",{className:"button-text",children:"Edit"}),(0,c.jsx)("span",{className:"button-glow"})]}),(0,c.jsxs)("button",{className:"cyber-button",onClick:w,disabled:j,children:[(0,c.jsx)("span",{className:"button-text",children:j?"Posting...":"Publish"}),(0,c.jsx)("span",{className:"button-glow"})]})]})]}):(0,c.jsxs)("div",{className:"modal-body",children:[(0,c.jsx)("div",{className:"input-group",children:(0,c.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Enter post title...",className:"cyber-input title-input",maxLength:100})}),(0,c.jsx)("div",{className:"input-group",children:(0,c.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"cyber-select category-select",children:[(0,c.jsx)("option",{value:"",children:"Select Category"}),["Post","Project","Research","Job","Service"].map((e=>(0,c.jsx)("option",{value:e,children:e},e)))]})}),(0,c.jsx)(n.K,{apiKey:"vzy136fy9hej20t0rxfpxu19mooxienl5owvp1v3af6w09di",value:r,onEditorChange:e=>d(e),init:{height:300,menubar:!1,plugins:["lists","link"],toolbar:"bold italic underline | bullist numlist | link",content_style:'body { font-family: "Orbitron", sans-serif; font-size:14px; background: rgba(10, 10, 46, 0.8); color: #4fc3f7; }',skin:"oxide-dark",content_css:"dark"}}),(0,c.jsxs)("div",{className:"file-upload cyber-box",children:[(0,c.jsx)("input",{type:"file",ref:v,onChange:e=>{const s=Array.from(e.target.files);b((e=>[...e,...s]))},multiple:!0,accept:"image/*",style:{display:"none"}}),(0,c.jsxs)("button",{className:"cyber-button upload-button",onClick:()=>v.current.click(),children:[(0,c.jsx)("span",{className:"button-text",children:"Attach Files"}),(0,c.jsx)("span",{className:"button-glow"})]}),(0,c.jsx)("div",{className:"file-list",children:m.map(((e,s)=>(0,c.jsxs)("div",{className:"file-item cyber-box",children:[(0,c.jsx)("span",{children:e.name}),(0,c.jsx)("button",{className:"cyber-button-small",onClick:()=>(e=>{b((s=>s.filter(((s,t)=>t!==e))))})(s),children:"Remove"})]},s)))})]}),g.length>0&&(0,c.jsx)("div",{className:"error-messages cyber-alert",children:g.map(((e,s)=>(0,c.jsx)("p",{className:"error",children:e},s)))}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsxs)("button",{className:"cyber-button preview-button",onClick:()=>x(!0),children:[(0,c.jsx)("span",{className:"button-text",children:"Preview"}),(0,c.jsx)("span",{className:"button-glow"})]}),(0,c.jsxs)("button",{className:"cyber-button cancel-button",onClick:t,children:[(0,c.jsx)("span",{className:"button-text",children:"Cancel"}),(0,c.jsx)("span",{className:"button-glow"})]}),(0,c.jsxs)("button",{className:"cyber-button submit-button",onClick:w,disabled:j,children:[(0,c.jsx)("span",{className:"button-text",children:j?"Posting...":"Post"}),(0,c.jsx)("span",{className:"button-glow"})]})]})]})]})}):null}}}]);
//# sourceMappingURL=40.b31fc134.chunk.js.map